struct Vec3 {
    x : int;
    y : int;
    z : int;
}

proc vec3_add(a : ^Vec3, b : ^Vec3, c : ^Vec3) {
    c.x = a.x + b.x;
    (*c).y = (*a).y + (*b).y;
    c.z = a.z + b.z;
}

/*
proc vec3_add2(a : Vec3, b : Vec3, c : ^Vec3) {
    c.x = a.x + b.x;
    (*c).y = a.y + b.y;
    c.z = a.z + b.z;
}
*/

proc main() => int {
    #writeout("Structs\n", 8);

    var a : Vec3;
    a.x = 1;
    a.y = 2;
    a.z = 3;

    // Copy a into b
    var b : Vec3 = a;

    // Copy a into c (via pointer)
    var c : Vec3;
    var p_c : ^Vec3 = ^c;
    *p_c = a;

    var d : Vec3;
    vec3_add(^a, ^b, ^d);  // d = a + b
    vec3_add(^d, p_c, ^d); // d = d + c

    // 3 + 6 + 9 = 18
    return d.x + d.y + d.z;
}
